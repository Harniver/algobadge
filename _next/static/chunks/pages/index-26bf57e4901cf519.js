(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8481)}])},8481:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSG:function(){return B},default:function(){return G}});var n=t(5893);function o(e){return e>=200?"gold":e>=150?"silver":e>=100?"bronze":"none"}var a=t(4408),i=t.n(a),s=t(9655),l=t(2050);function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function u(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(l){s=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){var r=e.score;if(200===r)return(0,n.jsx)(l.Z,{children:(0,n.jsx)(l.Z,{className:i().progressGold,animated:!0,now:100})});var t=[],o=[{from:0,to:100,className:i().progressNone},{from:100,to:150,className:i().progressBronze},{from:150,to:200,className:i().progressSilver}],a=!0,s=!1,c=void 0;try{for(var u,d=o[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(r>=f.from){var h=Math.min(r-f.from,f.to-f.from);t.push((0,n.jsx)(l.Z,{className:f.className,animated:!0,now:.5*h},f.from))}}}catch(v){s=!0,c=v}finally{try{a||null==d.return||d.return()}finally{if(s)throw c}}return(0,n.jsx)(l.Z,{children:t})}function f(e){var r=e.tasks,t=function(e){var r=e.task,t=e.score;return(0,n.jsxs)("li",{children:[(0,n.jsx)("a",{href:"https://training.olinfo.it/#/task/".concat(r,"/statement"),rel:"noreferrer",target:"_blank",children:r})," ","(",t," / 100)"]})};return(0,n.jsx)("ul",{children:Object.entries(r).map((function(e){var r=u(e,2),o=r[0],a=r[1];return(0,n.jsx)(t,{task:o,score:a},o)}))})}function h(e){var r=e.badge;return(0,n.jsxs)("div",{className:i().category,children:[(0,n.jsx)("h2",{className:i().title,children:r.node.title}),"locked"!==r.badge?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{score:r.score}),(0,n.jsx)("div",{className:i().taskList,children:(0,n.jsx)(f,{tasks:r.tasks})})]}):(0,n.jsxs)("p",{children:["Questa categoria \xe8 bloccata! Totalizza almeno ",50," punti in"," ",(0,n.jsx)("code",{children:r.node.prerequisites})," per sbloccarla."]}),(0,n.jsx)("div",{className:i().resources,children:(0,n.jsx)(s.D,{components:{h1:"h3",h2:"h4",h3:"h5",h4:"h6"},children:r.node.resources_md})})]})}var v=t(8707),g=t.n(v);function p(){return(0,n.jsxs)("div",{className:g().loading,children:[(0,n.jsx)("img",{src:"/loading.gif",alt:"Loading..."}),"caricamento..."]})}function y(){return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Login richiesto"}),(0,n.jsxs)("p",{children:["Per usare algobadge devi essere loggato su"," ",(0,n.jsx)("a",{href:"https://training.olinfo.it/",children:"https://training.olinfo.it/"})]})]})}var m=t(7294),b=t(5532),x=t.n(b),_=function(e){var r=e.getBoundingClientRect();return{left:r.left+window.pageXOffset,top:r.top+window.pageYOffset,width:r.width||e.offsetWidth,height:r.height||e.offsetHeight}};function j(e){var r=e.start,t=e.end,o=_(r),a=_(t),i=o.left+o.width/2,s=o.top+o.height/2,l=a.left+a.width/2,c=a.top+a.height/2,u=Math.sqrt((l-i)*(l-i)+(c-s)*(c-s)),d=(i+l)/2-u/2,f=(s+c)/2-1,h=Math.atan2(s-c,i-l)*(180/Math.PI),v={"--color":"black","--thickness":"".concat(2,"px"),"--cx":"".concat(d,"px"),"--cy":"".concat(f,"px"),"--length":"".concat(u,"px"),"--angle":"".concat(h,"deg")};return(0,n.jsx)("div",{className:x().line,style:v})}var w=t(695),N=t.n(w),k={locked:"#eee",none:"#fff",bronze:"#cd7f32",silver:"#c0c0c0",gold:"#ffdf00"},S={locked:"#bbb",none:"#000",bronze:"#523214",silver:"#4c4c4c",gold:"#665900"};function C(e){var r=e.node,t=e.onClick,o={"--row":r.node.position[1],"--column":r.node.position[0],"--color":k[r.badge],"--text-color":S[r.badge]},a=100*r.node.tasks.length;return(0,n.jsx)("div",{className:N().node,style:o,children:(0,n.jsxs)("button",{"data-node-id":r.node.id,className:N().badge,onClick:t,children:[(0,n.jsx)("div",{className:N().badgeName,children:r.node.id}),(0,n.jsxs)("div",{className:N().score,children:[r.score," / ",a]})]})})}function O(e){var r=e.badges,t=e.setSelectedNode,o=(0,m.useRef)(null),a=(0,m.useState)(null),i=a[0],s=a[1],l=(0,m.useState)([]),c=l[0],u=l[1];(0,m.useEffect)((function(){if(null!==o.current){var e=o.current.querySelectorAll(".".concat(N().badge)),r=Object.fromEntries(Array.from(e.values()).map((function(e){return[e.getAttribute("data-node-id"),e]})));s(r)}}),[]);var d=(0,m.useCallback)((function(){if(i){var e=[],t=!0,n=!1,o=void 0;try{for(var a,s=Object.values(r)[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value,c=!0,d=!1,f=void 0;try{for(var h,v=l.node.prerequisites[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var g=h.value,p=i[l.node.id],y=i[g];e.push({id:"".concat(l.node.id,"-").concat(g),start:p,end:y})}}catch(m){d=!0,f=m}finally{try{c||null==v.return||v.return()}finally{if(d)throw f}}}}catch(m){n=!0,o=m}finally{try{t||null==s.return||s.return()}finally{if(n)throw o}}u(e)}}),[r,i]);(0,m.useEffect)((function(){d()}),[r,d]),(0,m.useEffect)((function(){return window.addEventListener("resize",d),function(){return window.removeEventListener("resize",d)}}),[d]);var f=Object.values(r);return(0,n.jsxs)("div",{className:N().tree,ref:o,children:[f.map((function(e){return(0,n.jsx)(C,{node:e,onClick:function(){return t(e.node.id)}},e.node.id)})),c.map((function(e){return(0,n.jsx)(j,{start:e.start,end:e.end},e.id)}))]})}var E=t(6489);function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function z(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(l){s=!0,o=l}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(){var e=(0,m.useState)(void 0),r=e[0],t=e[1];return(0,m.useEffect)((function(){t(function(){var e=E.parse(window.document.cookie);if(!e.token)return null;var r=z(e.token.split("."),3),t=(r[0],r[1]);r[2];try{var n=t.replace(/-/g,"+").replace(/_/g,"/"),o=atob(n);return JSON.parse(o)}catch(a){return null}}())}),[]),r}var P=t(4051),L=t.n(P);function M(e,r,t,n,o,a,i){try{var s=e[a](i),l=s.value}catch(c){return void t(c)}s.done?r(l):Promise.resolve(l).then(n,o)}function q(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var a=e.apply(r,t);function i(e){M(a,n,o,i,s,"next",e)}function s(e){M(a,n,o,i,s,"throw",e)}i(void 0)}))}}function I(){return(I=q(L().mark((function e(r){var t,n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={action:"get",username:r},e.next=4,fetch("https://training.olinfo.it/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});case 4:if(200===(n=e.sent).status){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var B=!0;function G(e){var r,t,a=e.taskGraph,i=T(),s=(0,m.useState)(void 0),l=s[0],c=s[1],u=(0,m.useState)(null!==(t=null===(r=a.nodes.find((function(e){return 0===e.prerequisites.length})))||void 0===r?void 0:r.id)&&void 0!==t?t:""),d=u[0],f=u[1];if((0,m.useEffect)((function(){null===i&&c(null),i&&function(e){return I.apply(this,arguments)}(i.username).then((function(e){return c(e)}))}),[i]),void 0===i||void 0===l)return(0,n.jsx)(p,{});if(null===i||null===l)return(0,n.jsx)(y,{});var v=function(e,r){var t={},n=Object.fromEntries(r.scores.map((function(e){return[e.name,e.score]}))),a=!0,i=!1,s=void 0;try{for(var l,c=e.nodes[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value,d=0,f={},h=!0,v=!1,g=void 0;try{for(var p,y=u.tasks[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var m,b=p.value,x=null!==(m=n[b.name])&&void 0!==m?m:0;f[b.name]=x,d+=x}}catch(P){v=!0,g=P}finally{try{h||null==y.return||y.return()}finally{if(v)throw g}}t[u.id]={node:u,score:d,badge:o(d),tasks:f}}}catch(P){i=!0,s=P}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}var _=!0,j=!1,w=void 0;try{for(var N,k=e.nodes[Symbol.iterator]();!(_=(N=k.next()).done);_=!0){var S=N.value,C=!1,O=!0,E=!1,A=void 0;try{for(var z,T=S.prerequisites[Symbol.iterator]();!(O=(z=T.next()).done);O=!0)t[z.value].score<50&&(C=!0)}catch(P){E=!0,A=P}finally{try{O||null==T.return||T.return()}finally{if(E)throw A}}C&&(t[S.id].badge="locked")}}catch(P){j=!0,w=P}finally{try{_||null==k.return||k.return()}finally{if(j)throw w}}return t}(a,l);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:["Ciao ",i.firstName," ",i.lastName,"! (Login effettuato tramite"," ",(0,n.jsx)("a",{href:"https://training.olinfo.it",children:"training.olinfo.it"}),")"]}),(0,n.jsx)(O,{badges:v,setSelectedNode:f}),d in v&&(0,n.jsx)(h,{badge:v[d]})]})}},4408:function(e){e.exports={category:"Category_category__yzdBd",title:"Category_title__8klu6",taskList:"Category_taskList__uYCvW",resources:"Category_resources__dqPOc",progressNone:"Category_progressNone__9YiBO",progressBronze:"Category_progressBronze__rzZQa",progressSilver:"Category_progressSilver__dwDjQ",progressGold:"Category_progressGold__zam7M"}},8707:function(e){e.exports={loading:"Loading_loading__PXEn4"}},5532:function(e){e.exports={line:"Line_line__C9XiF"}},695:function(e){e.exports={tree:"Tree_tree__UfTc3",node:"Tree_node__fgN5z",badge:"Tree_badge__VAWxQ",badgeName:"Tree_badgeName__UP_Ry",score:"Tree_score__RxP9M"}}},function(e){e.O(0,[282,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);