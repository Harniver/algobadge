(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4311)}])},4311:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSG:function(){return F},default:function(){return J}});var t=n(5893),o=100,a=.5,i=.75;function s(e,r){return e>=o*r*1?"gold":e>=o*r*i?"silver":e>=o*r*a?"bronze":"none"}var l=n(4408),c=n.n(l),u=n(9655),d=n(7294),f=n(674),h=n.n(f),v=n(2050);function p(e){var r=e.color;return(0,t.jsx)("svg",{fill:r,width:"35px",height:"35px",viewBox:"0 0 1024 1024",children:(0,t.jsx)("path",{d:"M547 304.2h-451l108.2-207.8h481.4z M685.6 754.4c0 95.656-77.544 173.2-173.2 173.2s-173.2-77.544-173.2-173.2c0-95.656 77.544-173.2 173.2-173.2s173.2 77.544 173.2 173.2z M697.8 598.2l230.2-294-138.6-207.8-276.6 415.6c64.6 0 125.4 25.4 171 71 5 5 9.6 10 14 15.2z M411.6 533.2l-107-161.2h-207.8l180.2 323c10.4-42.4 32.2-81.2 64-112.8 20.8-20.6 44.6-37.2 70.6-49z"})})}function g(){var e=[{position:a,color:"#cd7f32"},{position:i,color:"#c0c0c0"},{position:1,color:"#ffdf00"}];return(0,t.jsx)(t.Fragment,{children:e.map((function(e){return(0,t.jsx)("div",{className:h().checkpoint,style:{"--position":"".concat(100*e.position,"%")},children:(0,t.jsx)(p,{color:e.color})},e.position)}))})}function y(e){var r=e.score,n=e.numTasks;if(r===n*o)return(0,t.jsx)("div",{className:h().progress,children:(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(v.Z,{className:h().progressGold,animated:!0,now:100}),(0,t.jsx)(g,{})]})});var s=[],l=[{from:i,to:1,className:h().progressSilver},{from:a,to:i,className:h().progressBronze},{from:0,to:a,className:h().progressNone}],c=r/n/o,u=!0,d=!1,f=void 0;try{for(var p,y=l[Symbol.iterator]();!(u=(p=y.next()).done);u=!0){var m=p.value;if(c>=m.from){s.push((0,t.jsx)(v.Z,{className:m.className,animated:!0,now:100*c},m.from));break}}}catch(x){d=!0,f=x}finally{try{u||null==y.return||y.return()}finally{if(d)throw f}}return(0,t.jsx)("div",{className:h().progress,children:(0,t.jsxs)(v.Z,{children:[s,(0,t.jsx)(g,{})]})})}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function x(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);i=!0);}catch(l){s=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return m(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){var r=e.tasks,n=function(e){var r=e.task,n=e.score;return(0,t.jsxs)("li",{children:[(0,t.jsx)("a",{href:"https://training.olinfo.it/#/task/".concat(r,"/statement"),rel:"noreferrer",target:"_blank",children:r})," ","(",n," / ",o,")"]})};return(0,t.jsx)("ul",{children:Object.entries(r).map((function(e){var r=x(e,2),o=r[0],a=r[1];return(0,t.jsx)(n,{task:o,score:a},o)}))})}function _(e){var r=e.badge,n=e.badges,a=r.node.prerequisites.map((function(e){return Object.keys(n[e].tasks).length*o})),i=r.node.tasks.length;return(0,t.jsxs)("div",{className:c().category,children:[(0,t.jsx)("h2",{className:c().title,children:r.node.title}),"locked"!==r.badge?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{score:r.score,numTasks:i}),(0,t.jsx)("div",{className:c().taskList,children:(0,t.jsx)(b,{tasks:r.tasks})})]}):(0,t.jsxs)("p",{children:["Questa categoria \xe8 bloccata! Totalizza almeno"," ",.25*a[0]," punti in"," ",(0,t.jsx)("code",{children:r.node.prerequisites})," per sbloccarla."]}),(0,t.jsx)("div",{className:c().resources,children:(0,t.jsx)(u.D,{components:{h1:"h3",h2:"h4",h3:"h5",h4:"h6"},children:r.node.resources_md})})]})}var j=n(8707),k=n.n(j);function w(){return(0,t.jsxs)("div",{className:k().loading,children:[(0,t.jsx)("img",{src:"/loading.gif",alt:"Loading..."}),"caricamento..."]})}function N(){return(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"Login richiesto"}),(0,t.jsxs)("p",{children:["Per usare algobadge devi essere loggato su"," ",(0,t.jsx)("a",{href:"https://training.olinfo.it/",children:"https://training.olinfo.it/"})]})]})}var S=n(5532),O=n.n(S),C=function(e){var r=e.getBoundingClientRect();return{left:r.left+window.pageXOffset,top:r.top+window.pageYOffset,width:r.width||e.offsetWidth,height:r.height||e.offsetHeight}};function E(e){var r=e.start,n=e.end,o=C(r),a=C(n),i=o.left+o.width/2,s=o.top+o.height/2,l=a.left+a.width/2,c=a.top+a.height/2,u=Math.sqrt((l-i)*(l-i)+(c-s)*(c-s)),d=(i+l)/2-u/2,f=(s+c)/2-1,h=Math.atan2(s-c,i-l)*(180/Math.PI),v={"--color":"black","--thickness":"".concat(2,"px"),"--cx":"".concat(d,"px"),"--cy":"".concat(f,"px"),"--length":"".concat(u,"px"),"--angle":"".concat(h,"deg")};return(0,t.jsx)("div",{className:O().line,style:v})}var P=n(695),T=n.n(P),z={locked:"#eee",none:"#fff",bronze:"#cd7f32",silver:"#c0c0c0",gold:"#ffdf00"},A={locked:"#bbb",none:"#000",bronze:"#523214",silver:"#4c4c4c",gold:"#665900"};function L(e){var r=e.node,n=e.onClick,a={"--row":r.node.position[1],"--column":r.node.position[0],"--color":z[r.badge],"--text-color":A[r.badge]},i=r.node.tasks.length*o;return(0,t.jsx)("div",{className:T().node,style:a,children:(0,t.jsxs)("button",{"data-node-id":r.node.id,className:T().badge,onClick:n,children:[(0,t.jsx)("div",{className:T().badgeName,children:r.node.id}),(0,t.jsxs)("div",{className:T().score,children:[r.score," / ",i]})]})})}function M(e){var r=e.badges,n=e.setSelectedNode,o=(0,d.useRef)(null),a=(0,d.useState)(null),i=a[0],s=a[1],l=(0,d.useState)([]),c=l[0],u=l[1];(0,d.useEffect)((function(){if(null!==o.current){var e=o.current.querySelectorAll(".".concat(T().badge)),r=Object.fromEntries(Array.from(e.values()).map((function(e){return[e.getAttribute("data-node-id"),e]})));s(r)}}),[]);var f=(0,d.useCallback)((function(){if(i){var e=[],n=!0,t=!1,o=void 0;try{for(var a,s=Object.values(r)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,c=!0,d=!1,f=void 0;try{for(var h,v=l.node.prerequisites[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var p=h.value,g=i[l.node.id],y=i[p];e.push({id:"".concat(l.node.id,"-").concat(p),start:g,end:y})}}catch(m){d=!0,f=m}finally{try{c||null==v.return||v.return()}finally{if(d)throw f}}}}catch(m){t=!0,o=m}finally{try{n||null==s.return||s.return()}finally{if(t)throw o}}u(e)}}),[r,i]);(0,d.useEffect)((function(){f()}),[r,f]),(0,d.useEffect)((function(){return window.addEventListener("resize",f),function(){return window.removeEventListener("resize",f)}}),[f]);var h=Object.values(r);return(0,t.jsxs)("div",{className:T().tree,ref:o,children:[h.map((function(e){return(0,t.jsx)(L,{node:e,onClick:function(){return n(e.node.id)}},e.node.id)})),c.map((function(e){return(0,t.jsx)(E,{start:e.start,end:e.end},e.id)}))]})}var q=n(6489);function I(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function B(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(t=n.next()).done)&&(a.push(t.value),!r||a.length!==r);i=!0);}catch(l){s=!0,o=l}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return I(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(){var e=(0,d.useState)(void 0),r=e[0],n=e[1];return(0,d.useEffect)((function(){n(function(){var e=q.parse(window.document.cookie);if(!e.token)return null;var r=B(e.token.split("."),3),n=(r[0],r[1]);r[2];try{var t=n.replace(/-/g,"+").replace(/_/g,"/"),o=atob(t);return JSON.parse(o)}catch(a){return null}}())}),[]),r}var X=n(4051),Z=n.n(X);function Q(e,r,n,t,o,a,i){try{var s=e[a](i),l=s.value}catch(c){return void n(c)}s.done?r(l):Promise.resolve(l).then(t,o)}function R(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var a=e.apply(r,n);function i(e){Q(a,t,o,i,s,"next",e)}function s(e){Q(a,t,o,i,s,"throw",e)}i(void 0)}))}}function U(){return(U=R(Z().mark((function e(r){var n,t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={action:"get",username:r},e.next=4,fetch("https://training.olinfo.it/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"});case 4:if(200===(t=e.sent).status){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,t.json();case 9:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var F=!0;function J(e){var r,n,a=e.taskGraph,i=G(),l=(0,d.useState)(void 0),c=l[0],u=l[1],f=(0,d.useState)(null!==(n=null===(r=a.nodes.find((function(e){return 0===e.prerequisites.length})))||void 0===r?void 0:r.id)&&void 0!==n?n:""),h=f[0],v=f[1];if((0,d.useEffect)((function(){null===i&&u(null),i&&function(e){return U.apply(this,arguments)}(i.username).then((function(e){return u(e)}))}),[i]),void 0===i||void 0===c)return(0,t.jsx)(w,{});if(null===i||null===c)return(0,t.jsx)(N,{});var p=function(e,r){var n={},t=Object.fromEntries(r.scores.map((function(e){return[e.name,e.score]}))),a=!0,i=!1,l=void 0;try{for(var c,u=e.nodes[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,f=0,h={},v=!0,p=!1,g=void 0;try{for(var y,m=d.tasks[Symbol.iterator]();!(v=(y=m.next()).done);v=!0){var x,b=y.value,_=null!==(x=t[b.name])&&void 0!==x?x:0;h[b.name]=_,f+=_}}catch(P){p=!0,g=P}finally{try{v||null==m.return||m.return()}finally{if(p)throw g}}n[d.id]={node:d,score:f,badge:s(f,d.tasks.length),tasks:h}}}catch(P){i=!0,l=P}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}var j=new Set,k=function(e){if(!j.has(e)){j.add(e);var r=n[e],t=!1,a=!0,i=!1,s=void 0;try{for(var l,c=r.node.prerequisites[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;k(u);var d=n[u],f=d.node.tasks.length*o*.25;("locked"===d.badge||d.score<f)&&(t=!0)}}catch(P){i=!0,s=P}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}t&&(r.badge="locked")}},w=!0,N=!1,S=void 0;try{for(var O,C=e.nodes[Symbol.iterator]();!(w=(O=C.next()).done);w=!0){var E=O.value;k(E.id)}}catch(P){N=!0,S=P}finally{try{w||null==C.return||C.return()}finally{if(N)throw S}}return n}(a,c);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:["Ciao"," ",(0,t.jsxs)("strong",{children:[i.firstName," ",i.lastName]}),"! (Login effettuato tramite"," ",(0,t.jsx)("a",{href:"https://training.olinfo.it",children:"training.olinfo.it"}),")"]}),(0,t.jsx)(M,{badges:p,setSelectedNode:v}),h in p&&(0,t.jsx)(_,{badge:p[h],badges:p})]})}},4408:function(e){e.exports={category:"Category_category__yzdBd",title:"Category_title__8klu6",taskList:"Category_taskList__uYCvW",resources:"Category_resources__dqPOc"}},674:function(e){e.exports={progressNone:"Progress_progressNone__o_ttj",progressBronze:"Progress_progressBronze__TJD81",progressSilver:"Progress_progressSilver__LQ8l3",progressGold:"Progress_progressGold__7qQo3",progress:"Progress_progress__axvfY",checkpoint:"Progress_checkpoint__TZ_n2"}},8707:function(e){e.exports={loading:"Loading_loading__PXEn4"}},5532:function(e){e.exports={line:"Line_line__C9XiF"}},695:function(e){e.exports={tree:"Tree_tree__UfTc3",node:"Tree_node__fgN5z",badge:"Tree_badge__VAWxQ",badgeName:"Tree_badgeName__UP_Ry",score:"Tree_score__RxP9M"}}},function(e){e.O(0,[282,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);